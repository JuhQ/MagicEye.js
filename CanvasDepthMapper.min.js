MagicEye.CanvasDepthMapper=MagicEye.DepthMapper.extend({constructor:function(t,e){e=e||{},this.canvas=t,this.inverted=e.inverted!==!1},make:function(){var t,e,a,n=this.canvas,r=n.getContext("2d"),i=[],h=n.width,c=n.height,o=r.getImageData(0,0,h,c).data;for(e=0;e<c;e++)for(i[e]=new Float32Array(h),a=h*e*4,t=0;t<h;t++)this.inverted?i[e][t]=1-o[a+4*t]/255:i[e][t]=o[a+4*t]/255;return i}});