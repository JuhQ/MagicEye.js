MagicEye.TemplateDepthMapper=MagicEye.DepthMapper.extend({constructor:function(e){this.template=e},make:function(){var e,t,r,n=this.template,p=0;if("string"==typeof n&&(n=n.split(/\n/)),"object"!=typeof n||!n.hasOwnProperty(0))throw new Error("MagicEye: invalid depth map template format");if("string"==typeof n[0])for(t=0;t<n.length;t++)for(n[t]=n[t].replace(/ /g,"0"),n[t]=n[t].replace(/[^\d\n]/g,"1"),n[t]=n[t].split(""),e=0;e<n[t].length;e++)n[t][e]=parseInt(n[t][e],10);if("object"!=typeof n[0])throw new Error("MagicEye: invalid depth map template format");for(r=0,t=0;t<n.length;t++)for(n[t].length>p&&(p=n[t].length),e=0;e<n[t].length;e++)n[t][e]>r&&(r=n[t][e]);for(t=0;t<n.length;t++)for(e=0;e<p;e++)"undefined"==typeof n[t][e]?n[t][e]=0:n[t][e]=n[t][e]/r;return n}});